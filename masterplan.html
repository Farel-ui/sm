<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Masterplan Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
  /* ===== CUSTOM SCROLLBAR ===== */
  .file-upload-box::-webkit-scrollbar { height: 6px; }
  .file-upload-box::-webkit-scrollbar-thumb { background-color: #6b7280; border-radius: 10px; }
  .file-upload-box::-webkit-scrollbar-track { background: #e5e7eb; }

  /* ===== FILE UPLOAD HOVER ===== */
  .file-upload-box { transition: all 0.3s; background-color: #f9fafb; }
  .file-upload-box:hover { background-color: #f1f5f9; box-shadow: 0 4px 12px rgba(0,0,0,0.08); }

  /* ===== INPUT & SELECT FOCUS ===== */
  input, select { transition: all 0.3s; }
  input:focus, select:focus { outline: none; border-color: #3b82f6; box-shadow: 0 0 6px rgba(59,130,246,0.3); }

  /* ===== MODAL ===== */
  #modal { border-radius: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,0.12); }
</style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="flex justify-between items-center bg-gradient-to-r from-blue-600 to-blue-900 text-white px-6 py-4 shadow-lg">
    <h1 class="font-extrabold text-2xl select-none tracking-wide drop-shadow-sm">DOKUMEN DASHBOARD</h1>
    <div class="flex items-center space-x-4 select-none">
      <span id="tanggalSekarang" class="text-sm font-semibold bg-white/20 px-4 py-1.5 rounded-full backdrop-blur shadow-md"></span>
      <button aria-label="User profile" title="User profile" class="w-10 h-10 rounded-full flex items-center justify-center bg-white/20 hover:bg-white/30 transition shadow-md">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="white" viewBox="0 0 24 24">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 
            1.79-4 4 1.79 4 4 4zm0 2c-2.67 
            0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      </button>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main class="flex-grow p-8">
    <!-- MODAL FORM -->
    <section id="modal" class="bg-white rounded-xl shadow-xl w-full max-w-3xl mx-auto" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1">
      <!-- Modal Header -->
      <header class="flex justify-between items-center border-b border-blue-300 px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-900 rounded-t-xl">
        <h2 id="modal-title" class="font-bold text-lg text-white select-none">Tambah Dokumen Baru</h2>
        <button id="closeBtn" aria-label="Close modal" class="text-white hover:text-red-500 transition font-bold text-2xl leading-none cursor-pointer">&times;</button>
      </header>

      <!-- FORM -->
      <form id="dokumenForm" class="px-6 pt-5 pb-6 space-y-6" novalidate>
        <!-- Judul & Tahun -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div class="flex flex-col">
            <label for="judul" class="mb-1 text-xs font-semibold tracking-wide select-none">Judul</label>
            <input type="text" id="judul" name="judul" placeholder="Judul dokumen" class="rounded-md bg-gray-100 border border-gray-300 focus:border-gray-500 focus:ring-2 focus:ring-gray-400 outline-none text-gray-800 text-sm px-3 py-2 transition" required />
            <span class="hidden text-red-500 text-xs mt-1" id="judulError">Isi judul dokumen</span>
          </div>
          <div class="flex flex-col">
            <label for="tahun" class="mb-1 text-xs font-semibold tracking-wide select-none">Tahun</label>
            <input type="number" id="tahun" name="tahun" placeholder="2025" min="2000" max="2099" class="rounded-md bg-gray-100 border border-gray-300 focus:border-gray-500 focus:ring-2 focus:ring-gray-400 outline-none text-gray-800 text-sm px-3 py-2 transition" required />
            <span class="hidden text-red-500 text-xs mt-1" id="tahunError">Masukkan tahun yang valid</span>
          </div>
        </div>

        <!-- Kategori & Status -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-center">
          <div class="flex flex-col">
            <label for="kategori" class="mb-1 text-xs font-semibold tracking-wide select-none">Kategori</label>
            <select id="kategori" name="kategori" class="rounded-md bg-gray-100 border border-gray-300 focus:border-gray-500 focus:ring-2 focus:ring-gray-400 outline-none text-gray-800 text-sm px-3 py-2 transition" required>
              <option value="paparan">MASTERPLAN</option>
              <option value="rencana">PAPARAN</option>
            </select>
            <span class="hidden text-red-500 text-xs mt-1" id="kategoriError">Pilih kategori dokumen</span>
          </div>
          <div class="flex flex-col">
            <span class="block mb-1 text-sm font-semibold">Status</span>
            <div class="flex items-center space-x-6">
              <label><input type="radio" name="status" value="public" required /> Public</label>
              <label><input type="radio" name="status" value="draft" required /> Draft</label>
            </div>
          </div>
        </div>

        <!-- Upload PDF -->
        <div class="flex flex-col">
          <label for="filePdf" class="mb-1 text-xs font-semibold tracking-wide select-none">Unggah PDF File</label>
          <div class="file-upload-box rounded-md border border-gray-300 bg-gray-100 min-h-[80px] flex items-center justify-center px-3 py-5 text-gray-500 text-sm cursor-pointer hover:bg-gray-200 transition relative overflow-auto">
            <input type="file" id="filePdf" name="filePdf" accept=".pdf" class="absolute inset-0 opacity-0 cursor-pointer" required />  
            <span id="fileName" class="pointer-events-none select-none">Klik atau tarik file PDF ke sini</span>
          </div>
          <small class="text-gray-500 mt-1 select-none">Maksimum ukuran file 10MB</small>
          <span class="hidden text-red-500 text-xs mt-1" id="fileError">Pilih file PDF yang valid</span>
        </div>

        <!-- Buttons -->
        <div class="flex justify-end space-x-4">
          <button type="button" id="cancelBtn" class="bg-red-500 hover:bg-red-600 transition rounded-md text-white font-semibold px-5 py-2 select-none">Batal</button>
          <button type="submit" class="bg-gradient-to-r from-blue-600 to-blue-900 hover:from-blue-400 hover:to-blue-700 transition rounded-md text-white font-semibold px-5 py-2 select-none">Simpan</button>
        </div>
      </form>
    </section>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Tampilkan tanggal otomatis
      const tanggalEl = document.getElementById("tanggalSekarang");
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      tanggalEl.textContent = new Date().toLocaleDateString('id-ID', options);

      // Update nama file saat upload
      const fileInput = document.getElementById('filePdf');
      const fileName = document.getElementById('fileName');
      fileInput.addEventListener('change', () => {
        fileName.textContent = fileInput.files[0]?.name || "Klik atau tarik file PDF ke sini";
      });

      // Form reset & validasi
      const form = document.getElementById('dokumenForm');
      const closeBtn = document.getElementById('closeBtn');
      const cancelBtn = document.getElementById('cancelBtn');

      function showError(id, show) {
        const el = document.getElementById(id);
        if(el) el.style.display = show ? 'block' : 'none';
      }
      function hideErrors() {
        ['judulError','tahunError','kategoriError','fileError'].forEach(id => showError(id,false));
      }
      function resetForm() {
        form.reset();
        fileName.textContent = "Klik atau tarik file PDF ke sini";
        hideErrors();
      }

      closeBtn.addEventListener('click', resetForm);
      cancelBtn.addEventListener('click', resetForm);

      function isValidYear(year) { return +year >= 2000 && +year <= 2099; }

      form.addEventListener('submit', e => {
        e.preventDefault();
        hideErrors();

        let valid = true;
        const { judul, tahun, kategori, status } = form;
        const file = fileInput.files[0];

        if(!judul.value.trim()){ showError('judulError', true); valid=false; }
        if(!tahun.value.trim() || !isValidYear(tahun.value)){ showError('tahunError', true); valid=false; }
        if(!kategori.value){ showError('kategoriError', true); valid=false; }
        if(!file || file.type !== 'application/pdf'){ showError('fileError', true); valid=false; }

        if(!valid) return;

        alert(`Dokumen tersimpan:\nJudul: ${judul.value}\nTahun: ${tahun.value}\nKategori: ${kategori.value}\nStatus: ${status.value}\nFile: ${file.name}`);
        resetForm();
      });
    });
  </script>
</body>
</html>
