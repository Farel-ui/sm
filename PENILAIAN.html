<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Penilaian Dashboard</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
/* Input fokus efek */
input:focus {
  outline: none;
  box-shadow: 0 0 6px rgba(59,130,246,0.3);
  border-color: #3b82f6;
}
</style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans min-h-screen flex flex-col">

  <!-- HEADER -->
  <header class="flex justify-between items-center bg-gradient-to-r from-blue-600 to-blue-900 text-white px-6 py-4 shadow-lg">
    <h1 class="font-extrabold text-2xl select-none tracking-wide drop-shadow-sm">PENILAIAN DASHBOARD</h1>
    <div class="flex items-center space-x-4 select-none">
      <span id="tanggalSekarang" class="text-sm font-semibold bg-white/20 px-4 py-1.5 rounded-full backdrop-blur shadow-md"></span>
      <button aria-label="User profile" title="User profile" class="w-10 h-10 rounded-full flex items-center justify-center bg-white/20 hover:bg-white/30 transition shadow-md">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-6 h-6" fill="white" viewBox="0 0 24 24">
          <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 
            1.79-4 4 1.79 4 4 4zm0 2c-2.67 
            0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
        </svg>
      </button>
    </div>
  </header>
  
  <!-- MAIN CONTENT -->
  <main class="flex-grow p-9">
    <!-- MODAL FORM -->
    <section id="modal" class="bg-white rounded-xl shadow-xl w-full max-w-3xl mx-auto" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1">
      <!-- Modal Header -->
      <header class="flex justify-between items-center border-b border-blue-300 px-6 py-4 bg-gradient-to-r from-blue-600 to-blue-900 rounded-t-xl">
        <h2 id="modal-title" class="font-bold text-lg text-white select-none">Tambah Penilaian Baru</h2>
        <button id="closeBtn" aria-label="Close modal" class="text-white hover:text-red-500 transition font-bold text-2xl leading-none cursor-pointer">&times;</button>
      </header>
      
      <form id="penilaianForm" class="p-5 space-y-4">
        <!-- Nilai -->
        <div>
          <label for="nilai" class="block text-xs font-semibold mb-1">NILAI (1.00 - 5.00)</label>
          <input type="number" id="nilai" name="nilai" min="1" max="5" step="0.01" placeholder="Contoh: 3.50" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" required />
          <span class="hidden text-red-500 text-xs mt-1" id="nilaiError">Nilai harus antara 1.00 - 5.00</span>
        </div>
        
        <!-- Tahun -->
        <div>
          <label for="tahun" class="block text-xs font-semibold mb-1">TAHUN</label>
          <input type="number" id="tahun" name="tahun" min="2000" max="2099" step="1" placeholder="2025" class="w-full rounded-md border border-gray-300 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500" required />
          <span class="hidden text-red-500 text-xs mt-1" id="tahunError">Tahun harus antara 2000 - 2099</span>
        </div>

        <!-- BUTTONS -->
        <div class="flex justify-end space-x-3 pt-2">
          <button type="button" id="cancelBtn" class="bg-red-600 hover:bg-red-700 text-white rounded-md px-5 py-2 text-sm font-semibold select-none">BATAL</button>
          <button type="submit" class="bg-blue-700 hover:bg-blue-800 text-white rounded-md px-5 py-2 text-sm font-semibold select-none">SIMPAN</button>
        </div>
      </form>
    </section>
  </main>

  <script>
    document.addEventListener("DOMContentLoaded", () => {
      // Tampilkan tanggal otomatis
      const tanggalEl = document.getElementById("tanggalSekarang");
      const options = { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' };
      tanggalEl.textContent = new Date().toLocaleDateString('id-ID', options);

      // Update nama file saat upload
      const fileInput = document.getElementById('filePdf');
      const fileName = document.getElementById('fileName');
      fileInput.addEventListener('change', () => {
        fileName.textContent = fileInput.files[0]?.name || "Klik atau tarik file PDF ke sini";
      });

      // Form reset & validasi
      const form = document.getElementById('dokumenForm');
      const closeBtn = document.getElementById('closeBtn');
      const cancelBtn = document.getElementById('cancelBtn');

      function showError(id, show) {
        const el = document.getElementById(id);
        if(el) el.style.display = show ? 'block' : 'none';
      }
      function hideErrors() {
        ['judulError','tahunError','kategoriError','fileError'].forEach(id => showError(id,false));
      }
      function resetForm() {
        form.reset();
        fileName.textContent = "Klik atau tarik file PDF ke sini";
        hideErrors();
      }

      closeBtn.addEventListener('click', resetForm);
      cancelBtn.addEventListener('click', resetForm);

      function isValidYear(year) { return +year >= 2000 && +year <= 2099; }

      form.addEventListener('submit', e => {
        e.preventDefault();
        hideErrors();

        let valid = true;
        const { judul, tahun, kategori, status } = form;
        const file = fileInput.files[0];

        if(!judul.value.trim()){ showError('judulError', true); valid=false; }
        if(!tahun.value.trim() || !isValidYear(tahun.value)){ showError('tahunError', true); valid=false; }
        if(!kategori.value){ showError('kategoriError', true); valid=false; }
        if(!file || file.type !== 'application/pdf'){ showError('fileError', true); valid=false; }

        if(!valid) return;

        alert(`Dokumen tersimpan:\nJudul: ${judul.value}\nTahun: ${tahun.value}\nKategori: ${kategori.value}\nStatus: ${status.value}\nFile: ${file.name}`);
        resetForm();
      });
    });
  </script>

</body>
</html>
